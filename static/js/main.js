!function(){!function(e,t,s){s=s||window;var r=!1;s.addEventListener(e,function(){r||(r=!0,requestAnimationFrame(function(){s.dispatchEvent(new CustomEvent(t)),r=!1}))})}("resize","optimizedResize");const e={navElem:document.querySelector(".nav"),scrolledClass:"scrolled",stickMenuToggle(){600<=scrollY?this.navElem.classList.add(this.scrolledClass):this.navElem.classList.remove(this.scrolledClass),window.addEventListener("scroll",e=>{600<=scrollY?this.navElem.classList.add(this.scrolledClass):this.navElem.classList.remove(this.scrolledClass)})},init(){this.stickMenuToggle()}};new class{constructor(e){this.discountSection=document.querySelector(e.section),this.discountElem=this.discountSection.querySelector(e.discountElem),this.tryElem=this.discountSection.querySelector(e.tryElem),this.btnNext=this.discountSection.querySelector(e.btnNext),this.closeBtn=this.discountSection.querySelector(e.closeBtn),this.wheelBody=this.discountSection.querySelector(e.wheelBody),this.btn=this.wheelBody.querySelector(".spin-btn"),this.wheel=this.wheelBody.querySelector(".wheel"),this.selector=this.wheelBody.querySelector(".selector"),this.discountInput=document.querySelector(".discount-input"),this.currency=e.currency,this.rotateTime=e.rotateTime,this.sectorsAmont=e.sectorsAmont,this.sectorValues=e.sectorValues,this.tryAmount=e.tryAmount||1,this.winSectors=e.winSectors||[],this.maxWin=0,this.rotatedAmount=0,this.init()}getRandomInt(e){return Math.floor(Math.random()*e)}spin(e){if(!(this.rotatedAmount>=this.tryAmount)){const r=this.rotatedAmount;var t=this.winSectors[r]||this.getRandomInt(this.sectorsAmont-2)+1,s=360/this.sectorsAmont,s=720*(this.rotatedAmount+1)+s*t;this.sectorValues[t]>this.maxWin&&(this.maxWin=this.sectorValues[t]),this.wheelBody.classList.remove("win"),this.wheel.style.transform=`rotate(${s}deg)`,setTimeout(()=>{this.wheelBody.classList.add("win"),this.updateText(r,r)},this.rotateTime),this.rotatedAmount++}}updateText(e=0){this.discountElem.innerText=`${this.maxWin}${this.currency}`,this.tryElem.innerText=`${e+1} / ${this.tryAmount}`,this.discountInput.value=`${this.maxWin}${this.currency}`}goTo(e){const t=document.querySelector(e);this.discountSection.classList.remove("show"),t.classList.add("show")}init(){this.updateText(),this.btn.addEventListener("click",e=>this.spin(e)),this.btnNext.addEventListener("click",e=>this.goTo(".quiz.modal")),this.closeBtn.addEventListener("click",e=>{const t=document.querySelector(".are-you-shure .continue");t.dataset.target="wheel",this.goTo(".are-you-shure")})}}({section:".discount-wheel",wheelBody:"#wheel",sectorsAmont:8,sectorValues:[0,0,75,300,0,100,25,50],currency:"$",tryAmount:3,winSectors:[0,0,3],rotateTime:1600,discountElem:".discount",tryElem:".try-count span",btnNext:".open-estimate-quiz",closeBtn:".close-modal-btn"});window.addEventListener("load",e=>{!function(){let e=document.getElementById("preloader");setTimeout(()=>{setTimeout(()=>{e.style.transition="visibility ease 0ms, opacity ease 0ms",e.classList.remove("show")},0)},0)}()});new Swiper(".gallery-slider",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar"},breakpoints:{200:{slidesPerView:1,spaceBetween:8},640:{slidesPerView:2,spaceBetween:16},992:{slidesPerView:3,spaceBetween:16}}}),new Swiper(".review-slider",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{200:{slidesPerView:1,spaceBetween:8},640:{slidesPerView:2,spaceBetween:16},992:{slidesPerView:3,spaceBetween:16}}});!function(){for(let t of document.querySelectorAll('a[href*="#"]'))t.addEventListener("click",function(e){e.preventDefault();e=t.getAttribute("href").substr(1);document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start"})})}(),e.init(),function(){const e=document.querySelectorAll("input.zip-modal-open");e.forEach(t=>{const s=t.closest("form.enter-zip-code-wrap"),r=s.querySelector(".error-msg");s.addEventListener("submit",e=>{e.preventDefault(),5===t.value.length?(function(e){const t=document.querySelector(".main-content"),s=document.querySelector(".discount-wheel"),r=document.querySelector("input.zip-input");r.value=e,t.classList.remove("show"),s.classList.add("show")}(t.value),s.reset()):r.innerText="Enter valid zip-code: 6 numbers"}),t.addEventListener("input",e=>{var t=e.target.value.replace(/\D/g,"").match(/(\d{0,5})/);e.target.value=t[1],5===e.target.value.length&&(r.innerText="")})})}();new class{constructor(e){this.form=document.querySelector(e.form),this.steps=this.form.querySelectorAll(e.steps),this.progress=document.querySelector(e.progress),this.applyBtnSelector=e.nextBtn,this.reg={email:/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/,name:/([a-zA-Z]{1,}\s{0,}[a-zA-Z]{1,}'?-?[a-zA-Z]{1,}\s?([a-zA-Z]{1,})?)/},this.step=0,this.stepsAmount=this.steps.length,this.init()}closeModalWindow(){const e=document.querySelector(".main-content"),t=document.querySelector(".quiz.modal"),s=document.querySelector(".are-you-shure"),r=document.querySelector(".to-home-page"),i=this.form.querySelectorAll(".error-msg"),o=this.form.querySelectorAll(this.applyBtnSelector),n=this.form.querySelectorAll(".yes-btn, .no-btn"),a=this.form.querySelectorAll(".data-info"),l=this.form.querySelectorAll(".fancy-input");e.classList.add("show"),t.classList.remove("show"),s.classList.remove("show"),r.classList.remove("show"),this.form.reset(),this.toStep(0),o.forEach(e=>{e.classList.remove("hide"),"disable"===e.dataset.state&&e.setAttribute("disabled","disabled")}),n.forEach(e=>e.classList.add("hide")),a.forEach(e=>e.innerText=""),i.forEach(e=>e.innerText=""),l.forEach(e=>e.classList.remove("error"))}toggleConfirmExitWindow(){const e=document.querySelector(".quiz.modal"),t=document.querySelector(".are-you-shure"),s=document.querySelector(".are-you-shure .continue");s.dataset.target="quiz",t.classList.toggle("show"),e.classList.toggle("show")}openGoToHomeWindow(){const e=document.querySelector(".quiz.modal"),t=document.querySelector(".to-home-page");t.classList.add("show"),e.classList.remove("show")}toStep(e){this.step=e,this.steps.forEach((e,t)=>{t<this.step?(e.classList.remove("active","next"),e.classList.add("prev")):t===this.step?(e.classList.remove("prev","next"),e.classList.add("active")):(e.classList.remove("prev","active"),e.classList.add("next"))}),this.updateHeroMsg(this.steps[this.step]),this.progressUpdate()}progressUpdate(){this.progress.style.width=100/this.stepsAmount*(this.step+1)+"%"}nextStep(){this.step++,this.toStep(this.step)}validate(e){const t=e.querySelectorAll("input");let s=!1;return t.forEach(e=>{"phone"===e.name&&this.validateTel(e)&&(s=!0),("name"===e.name&&this.validateName(e)||"email"===e.name&&this.validateEmail(e))&&(s=!0)}),!s}validateEmail(e){const t=e.closest(".fancy-input"),s=t.querySelector(".error-msg");let r=!1,i="";return e.value?this.reg.email.test(e.value)||(r=!0,i="Enter valid email please"):(r=!0,i="Enter your email please"),r?t.classList.add("error"):t.classList.remove("error"),s.innerText=i,e.addEventListener("input",e=>{t.classList.remove("error"),s.innerText=""}),r}validateName(e){const t=e.closest(".fancy-input"),s=t.querySelector(".error-msg"),r=e.value.trim();let i=!1,o="";return r?r.trim().includes(" ")?this.reg.name.test(r)||(i=!0,o="Enter valid full name, only latter and space"):(i=!0,o="Enter valid full name: first name and last name"):(i=!0,o="Enter your full name please"),i?t.classList.add("error"):t.classList.remove("error"),s.innerText=o,e.addEventListener("input",e=>{t.classList.remove("error"),s.innerText=""}),i}validateTel(e){const t=e.closest(".fancy-input"),s=t.querySelector(".error-msg");var r=e.value.trim();let i=!1,o="";return r?r.length<14&&(i=!0,o="Enter valid phone number please"):(i=!0,o="Enter your phone number please"),i?t.classList.add("error"):t.classList.remove("error"),s.innerText=o,e.addEventListener("input",e=>{t.classList.remove("error"),s.innerText=""}),i}updateConfirmPhone(e){if(this.form.querySelector(".phone-confirm")){const t=this.form.querySelector(".phone-confirm");t.innerText=e}}updateHeroMsg(e){const t=document.querySelector("#hero-msg");e.dataset.info?t.innerText=e.dataset.info:t.innerText=""}submitForm(e){const t=e.querySelectorAll("input, select, button"),s=new FormData(e);let r={};var i,e="";let o=[];for(i of s.entries()){var n=i[0],a=i[1];"name"!==n&&"phone"!==n&&"email"!==n&&(r[n]=a,o.push(n))}o.forEach(e=>s.delete(e)),e=JSON.stringify(r),s.set("order",e),s.set("stream_key","ggxnqHMBjw"),fetch("https://hm.afflifter.com/api/leads",{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:s}).then(e=>{document.location.href="./success.html",this.enableFormInputs(t),this.closeModalWindow()})}enableFormInputs(e){e.forEach(e=>{e.removeAttribute("disabled")})}disableFormInputs(e){e.forEach(e=>{e.setAttribute("disabled",!0)})}init(){const e=this.form.querySelector(".change-phone"),t=document.querySelector(".quiz.modal .close-modal-btn"),s=document.querySelector(".are-you-shure .exit"),r=document.querySelector(".to-home-page .exit"),i=document.querySelector(".are-you-shure .continue");function n(e){"Enter"!==e.key&&"Tab"!==e.key||e.preventDefault()}this.progressUpdate(),this.steps[this.step].classList.remove("prev","next"),this.steps[this.step].classList.add("active"),this.updateHeroMsg(this.steps[this.step]),this.steps.forEach(t=>{const s=t.querySelector(this.applyBtnSelector),r=t.querySelector(".yes-btn"),i=t.querySelector(".no-btn"),e=t.querySelectorAll("input"),o=t.querySelector(".data-info");e.forEach(t=>{"radio"===t.type?t.addEventListener("change",e=>{t.checked?s.removeAttribute("disabled"):s.setAttribute("disabled"),t.dataset.info?(o.innerText=t.dataset.info,r.classList.remove("hide"),i.classList.remove("hide"),s.classList.add("hide")):(o.innerText="",r.classList.add("hide"),i.classList.add("hide"),s.classList.remove("hide"))}):"phone"===t.name&&t.addEventListener("input",e=>{var t=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value="("+t[1]+") "+t[2]+"-"+t[3],this.updateConfirmPhone(e.target.value)}),t.addEventListener("keydown",n)});try{i.addEventListener("click",e=>{e.preventDefault(),this.openGoToHomeWindow()}),i.addEventListener("keydown",n)}catch(e){}try{r.addEventListener("click",e=>{e.preventDefault(),this.validate(t)&&this.nextStep()}),r.addEventListener("keydown",n)}catch(e){}try{s.addEventListener("click",e=>{e.preventDefault(),this.validate(t)&&this.nextStep()}),s.addEventListener("keydown",n)}catch(e){}}),e.addEventListener("click",e=>{e.preventDefault(),this.toStep(this.step-1)}),t.addEventListener("click",e=>{this.toggleConfirmExitWindow()}),s.addEventListener("click",e=>{e.preventDefault(),this.closeModalWindow()}),r.addEventListener("click",e=>{e.preventDefault(),this.closeModalWindow()}),i.addEventListener("click",e=>{if(e.preventDefault(),"quiz"===i.dataset.target)this.toggleConfirmExitWindow();else if("wheel"===i.dataset.target){const t=document.querySelector(".discount-wheel"),s=document.querySelector(".are-you-shure");t.classList.add("show"),s.classList.remove("show")}}),this.form.addEventListener("submit",e=>{e.preventDefault(),this.submitForm(this.form)})}}({form:"#step-form",steps:".step",progress:"#form-progress",nextBtn:".aplay-btn"})}();